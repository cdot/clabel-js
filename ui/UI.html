<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <!--meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'" />
    <meta http-equiv="X-Content-Security-Policy" content="default-src 'self'; script-src 'self'" / -->
    <title>clabel</title>
    <link rel="icon" href="clabel.svg" type="image/x-icon" />
    <link href="./styles.css" rel="stylesheet" type="text/css">
    <!--link id="jQueryTheme" href="./node_modules/jquery-ui/dist/themes/pepper-grinder/jquery-ui.min.css" rel="stylesheet" type="text/css" -->
    <script src="./node_modules/jquery/dist/jquery.min.js"></script>
    <script src="./node_modules/dom-to-image/dist/dom-to-image.min.js"></script>
    <script src="./UI.js" type="module"></script>
  </head>
  <body>
    <h1 style=" display:flex;align-items:center;">
      <img src="clabel.svg" style="height:60px;display:inline-box"> C-label
    </h1>
    <h2 id="info">
      Printer model <span class="text-model"></span>, Tape width <span class="text-media_width_mm"></span>mm, <span data-tooltip="The printable width gives the maximum height for the label that can be printed.">Printable width <span class="text-printable_width_mm"></span>mm (<span class="text-printable_width_px"></span>px)</span>
    </h2>
    <div>
      <div id="textarea_controls" class="bordered-box">
        <h1 data-tooltip="You can type almost any raw HTML you like">
          HTML
        </h1>
        <label for="select_font" data-tooltip="Select the font for the current selection or the whole label if nothing is selected.">Font</label>
        <select id="select_font">
          <option>sansserif</option>
          <option>serif</option>
          <option>monospace</option>
          <option>cursive</option>
          <option>fantasy</option>
          <option>emoji</option>
          <option>math</option>
          <option>fangsong</option>
        </select>
        <input id="font-size" class="three-digits" type="number" min="1" max="999" value="30" />px
        <button type="button" id="bold">Bold</button>
        <button type="button" id="italic">Italic</button>
        <button type="button" id="invert">Invert</button>
        <textarea id="label_text"></textarea>
        Rendered height: <span id="label_width_mm"></span>mm (<span id="label_width_px"></span>px)
      </div>
    </div>
    <h2 data-tooltip="This is your HTML rendered in the browser">
      Review
    </h2>
    <div id="review_liner" class="min-height-media_width_px">
      <div id="review_div" class="font-family-sanserif">strip</div>
    </div>
    <h2 data-tooltip="This is the actual bitmap that will be sent to the printer. If the image is wider than the printable area of the tape, the image will be split over multiple lengths of tape. A green box will appear showing the width of the first tape length">
      Image
    </h2>
    Rendering:
    <label for="alpha_threshold" data-tooltip="Controls the value of the alpha channel, below which a pixel will be treated as transparent">Transparency</label>
    <input id="alpha_threshold" class="three-digits" type="number" min="1" max="255" value="30" />
    <label for="colour_threshold" data-tooltip="Controls the conversion of colours to black and white. Higher values mean more colours are converted.">Colour</label>
    <input id="colour_threshold" class="three-digits" type="number" min="1" max="255" value="200" />
    <div id="image_liner">
      <canvas id="image_canvas"></canvas>
      <div id="tape_div"></div>
    </div>
    <hr />
    <div class="bordered-box">
      <button type="button" id="print" data-tooltip="Send the label to the server for printing">Print</button>
      <button type="button" id="eject" data-tooltip="Eject the tape far enough so the last printed label is clear of the cutter">Eject</button>
    </div>
  </body>
</html>
